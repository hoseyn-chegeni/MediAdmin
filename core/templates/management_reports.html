{% extends 'base.html'%}

{% block content%}
<div class="container">
<h1>گزارش مدیریتی عملکرد کلینیک</h1>
<!-- USERS -->
<hr>
<br>
<br>
<br>
<div class="container mt-4">
    <h3>کاربران سیستم</h3>
    <br>

    <div class="row">
        <!-- Card for basic service details -->
        <div class="col-md-6">
            <div class="card mb-4">
                <div class="card-body">
                    <div class="card-text">
                        <p class="card-text"><strong>تعداد کل کاربران سیستم:</strong> {{total_users}}</p>
                        <hr>
                        <p class="card-text"><strong>کاربران فعال:</strong> {{active_users}}</p>
                        <hr>
                        <p class="card-text"><strong>کاربران معلق:</strong> {{accounts_suspensions}}</p>
                        <hr>
                        <p class="card-text"><strong>کاربران لاگین نکرده در ماه گذشته: </strong> {{inactive_accounts}}</p>
                        <hr>
                        <p class="card-text"><strong>کاربران افزوده شده در ماه گذشته: </strong> {{new_users}}</p>
                    </div>
                </div>
            </div>
        </div>

        <div class="col-md-6">
            <div class="card">
                <div class="card-body">
                    <h6>توزیع کاربران بر اساس نقش</h6>
                    <canvas id="userGroupChart"></canvas>
                </div>
            </div>
        </div>
    </div>
</div>
<hr>
<div class="container mt-4">
    <h3>تجهیزات پزشکی</h3>
    <br>

    <div class="row">
        <!-- Card for basic service details -->
        <div class="col-md-6">
            <div class="card mb-4">
                <div class="card-body">
                    <div class="card-text">
                        <p class="card-text"><strong>تعداد کل تجهیزات ثبت شده در سیستم:</strong> {{total_equipment}}</p>
                        <hr>
                        <p class="card-text"><strong>تعداد تجهیزات در حال استفاده:</strong> {{equipment_utilization}}</p>
                        <hr>
                        <p class="card-text"><strong>تجهیزات افزوده شده در ماه گذشته:</strong> {{new_equipment}}</p>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>

<hr>
<div class="container mt-4">
    <h3>نوبت دهی</h3>
    <br>

    <div class="row">
        <!-- Card for basic service details -->
        <div class="col-md-6">
            <div class="card mb-4">
                <div class="card-body">
                    <div class="card-text">
                        <p class="card-text"><strong>تعداد کل نوبت های ثبت شده در سیستم:</strong> {{total_appointments}}</p>
                        <hr>
                        <p class="card-text"><strong>تعداد کل نوبت های پذیرش شده :</strong> {{completed_appointments}}</p>
                        <hr>
                        <p class="card-text"><strong>تعداد کل نوبت های مراجعه نشده:</strong> {{missed_appointments}}</p>
                        <hr>
                        <p class="card-text"><strong> تعداد کل نوبت های لغو شده : </strong> {{cancelled_appointments}}</p>
                        <hr>
                    </div>
                </div>
            </div>
            <h6>نمودار رشد نوبت دهی در ۱۰ روز گذشته</h6>
            <canvas id="dailyAppointmentsChart"></canvas>
        </div>

        <div class="col-md-6">
            <div class="card">
                <div class="card-body">
                    <h6>توزیع نوبت ها بر اساس سرویس </h6>
                    <canvas id="appointmentTypesChart"></canvas>
                </div>
            </div>
        </div>
</div>
</div>
 <hr>

<div class="container mt-4">
    <h3>بیماران</h3>
    <br>

    <div class="row">
        <!-- Card for basic service details -->
        <div class="col-md-6">
            <div class="card mb-4">
                <div class="card-body">
                    <div class="card-text">
                        <p class="card-text"><strong>تعداد کل بیماران ثبت شده در سیستم:</strong> {{total_clients}}</p>
                        <hr>
                        <p class="card-text"><strong>تعداد کل بیماران ثبت شده در ماه گذشته:</strong> {{new_clients}}</p>
                        <hr>
                        <p class="card-text"><strong>درصد بیمارانی که مجددا در کلینیک پذیرش شده اند:</strong> {{client_retention}}</p>
                        <hr>
                        <p class="card-text"><strong>میانگین پذیرش به ازای بیمار:  </strong> {{average_receptions_per_client}}</p>
                        <hr>
                    </div>
                </div>
            </div>
            <h5 class="card-title">تعداد مشتریان بر اساس بیمه تحت پوشش</h5>
            <canvas id="insuranceProviderChart"></canvas>

            <hr>
            <h5 class="card-title">تعداد مشتریان ثبت‌نام شده در 10 روز گذشته</h5>
            <canvas id="clientsLast10DaysChart"></canvas>
        </div>

        <div class="col-md-6">
            <div class="card">
                <div class="card-body" style="height: 80%; width: 80%;">
                    <h5 class="card-title">توزیع مشتریان VIP</h5>
                    <canvas id="vipChart" ></canvas>
                    <hr>
                    <h5 class="card-title">توزیع بیماران بر حسب جنسیت</h5>
                    <canvas id="genderChart"></canvas>
                </div>
            </div>
        </div>
</div>
</div>
<hr>

<div class="container mt-4">
    <h3>مواد مصرفی</h3>
    <br>

    <div class="row">
        <!-- Card for basic service details -->
        <div class="col-md-6">
            <div class="card mb-4">
                <div class="card-body">
                    <div class="card-text">
                        <p class="card-text"><strong>تعداد کل مواد مصرفی ثبت شده در سیستم:</strong> {{total_consumables}}</p>
                        <hr>
                        <p class="card-text"><strong>آیتم های موجودی پایین:</strong> {{low_stock_items}}</p>
                        <hr>
                        <p class="card-text"><strong> تعداد موجودی های تاریخ مصرف گذشته:</strong> {{expired_items}}</p>
                        <hr>
                        <p class="card-text"><strong>هزینه‌ کل خریداری مواد مصرفی:  </strong> {{total_expenditure}}</p>
                        <hr>
                    </div>
                </div>
            </div>
        </div>

        <div class="col-md-6">
            <div class="card">
                <div class="card-body" style="height: 80%; width: 80%;">
                    <h5 class="card-title">توزیع دسته بندی مواد مصرفی</h5>
                    <canvas id="consumableCategoriesChart"></canvas>
                </div>
            </div>
        </div>
</div>
</div>
<hr>
<div class="container mt-4">
    <h3>تامین کنندگان</h3>
    <br>

    <div class="row">
        <!-- Card for basic service details -->
        <div class="col-md-6">
            <div class="card mb-4">
                <div class="card-body">
                    <div class="card-text">
                        <p class="card-text"><strong>تعداد کل تامین کنندگان ثبت شده در سیستم:</strong> {{total_suppliers}}</p>
                        <hr>
                        <p class="card-text"><strong>تامین کنندگان افزوده شده به سیستم در ماه جدید:</strong> {{new_suppliers}}</p>
                        <hr>
                    </div>
                </div>
            </div>
        </div>

        
</div>
</div>
<hr>

<div class="container mt-4">
    <h3>پزشکان</h3>
    <br>

    <div class="row">
        <!-- Card for basic service details -->
        <div class="col-md-6">
            <div class="card mb-4">
                <div class="card-body">
                    <div class="card-text">
                        <p class="card-text"><strong>تعداد کل  پزشکان ثبت شده در سیستم:</strong> {{total_doctors}}</p>
                        <hr>
                        <p class="card-text"><strong> پزشکان افزوده شده در ماه گذشته:</strong> {{new_doctors}}</p>
                        <hr>
                        <p class="card-text"><strong>میانگین نوبت های ثبت شده بر حسب پزشک:</strong> {{average_appointments_per_doctor}}</p>

                        <hr>
                    </div>
                </div>
            </div>
        </div>
</div>
</div>
<hr>
<div class="container mt-4">
    <h3>صورتحساب ها</h3>
    <br>

    <div class="row">
        <!-- Card for basic service details -->
        <div class="col-md-6">
            <div class="card mb-4">
                <div class="card-body">
                    <div class="card-text">
                        <p class="card-text"><strong>تعداد کل  صورتحساب های ثبت شده در سیستم:</strong> {{total_invoices}}</p>
                        <hr>
                        <p class="card-text"><strong>تعداد کل  صورتحساب های  پرداخت شده در سیستم:</strong> {{paid_invoices}}</p>
                        <hr>
                        <p class="card-text"><strong>تعداد کل  صورتحساب های  پرداخت نشده در سیستم:</strong> {{unpaid_invoices}}</p>
                        <hr>
                        <p class="card-text"><strong>میانگین ارزش صورتحساب ها:  </strong> {{average_invoice_value}}</p>
                        <hr>
                        <p class="card-text"><strong>مجموع مبلغ کل صورتحساب ها:  </strong> {{total_invoice_amount}}</p>
                        <hr>
                        <p class="card-text"><strong>میانگین تعداد  صورتحساب ها بر حسب بیماران:  </strong> {{average_invoices_per_client}}</p>
                    </div>
                </div>
            </div>
                <div style="height: 65%; width: 65%;">
                <h5 class="card-title">توزیع روش‌های پرداخت</h5>
                <canvas id="invoicesByPaymentMethodChart"></canvas>
            </div>
        </div>

        <div class="col-md-6">
            <div class="card">
                <div class="card-body">
                    <h5 class="card-title">تعداد صورتحساب بر اساس خدمات</h5>
                    <canvas id="invoicesByServiceChart"></canvas>
                    <hr>
                    <h5 class="card-title">تعداد صورتحساب های صادر شده در 10 روز گذشته</h5>
                    <canvas id="invoicesLast10DaysChart"></canvas>
                </div>
            </div>
        </div>
</div>
</div>
<hr>

<div class="container mt-4">
    <h3>صورتحساب ها</h3>
    <br>

    <div class="row">
        <!-- Card for basic service details -->
        <div class="col-md-6">
            <div class="card mb-4">
                <div class="card-body">
                    <div class="card-text">
                        <p class="card-text"><strong>تعداد کل هزینه‌ های ثبت شده برای مطب در سیستم:</strong> {{total_expenses}}</p>
                    </div>
                </div>

            </div>
        </div>

        <div class="col-md-6">
            <div class="card">
                <div class="card-body">
                    <h5 class="card-title">تعداد هزینه‌های ثبت شده در 10 روز گذشته</h5>
                    <canvas id="expensesLast10DaysChart"></canvas>
                </div>
            </div>
        </div>
</div>
</div>
<hr>

<div class="container mt-4">
    <h3>نسخه ها</h3>
    <br>

    <div class="row">
        <!-- Card for basic service details -->
        <div class="col-md-6">
            <div class="card mb-4">
                <div class="card-body">
                    <div class="card-text">
                        <p class="card-text"><strong>تعداد کل نسخه های ثبت شده در سیستم:</strong> {{total_prescription}}</p>
                        <hr>
                        <p class="card-text"><strong> میانگین تعداد نسخه بر حسب پزشک:</strong> {{average_prescriptions_per_doctor}}</p>
                        <hr>
                        <p class="card-text"><strong> نسخه های افزوده شده در ماه گذشته :</strong> {{new_prescription}}</p>
                        <hr>
                        <p class="card-text"><strong> میانگین تعداد نسخه بر حسب بیمار:</strong> {{average_prescriptions_per_client}}</p>

                    </div>
                </div>

            </div>
        </div>
</div>
</div>
<hr>

<div class="container mt-4">
    <h3>پذیرش </h3>
    <br>

    <div class="row">
        <!-- Card for basic service details -->
        <div class="col-md-6">
            <div class="card mb-4">
                <div class="card-body">
                    <div class="card-text">
                        <p class="card-text"><strong>تعداد کل پذیرش های ثبت شده در سیستم:</strong> {{total_reception}}</p>
                    </div>
                </div>
            </div>
            <h5 class="card-title">توزیع پذیرش‌ها بر اساس سرویس‌ها</h5>
            <canvas id="receptionsByServiceChart"></canvas>
        </div>
        <div class="col-md-6">
            <div class="card">
                <div class="card-body">
                    <h5 class="card-title">نمودار رشد پذیرش ها در ۱۰ روز گذشته</h5>
                    <canvas id="receptionsChart"></canvas>
                    <h5 class="card-title">مقایسه بیمارانی  حفظ شده و بیمارانی که دیگر مراجعه نکردند  </h5>
                    <canvas id="clientReceptionChart"></canvas>
                </div>
            </div>
        </div>
</div>
</div>
<hr>


<div class="container mt-4">
    <h3>سرویس ها </h3>
    <br>

    <div class="row">
        <!-- Card for basic service details -->
        <div class="col-md-6">
            <div class="card mb-4">
                <div class="card-body">
                    <div class="card-text">
                        <p class="card-text"><strong>تعداد کل سرویس های ثبت شده در سیستم:</strong> {{total_service}}</p>
                        <hr>
                        <p class="card-text"><strong>سرویس های افزوده شده در ماه گذشته:</strong> {{new_service}}</p>

                    </div>
                </div>
            </div>
        </div>
        <div class="col-md-6">
            <div class="card">
                <div class="card-body">
                    <h5 class="card-title">محبوب ترین سرویس های ارایه شده</h5>
                    <canvas id="serviceReceptionChart"></canvas>
                </div>
            </div>
        </div>
</div>
</div>
<hr>
<div class="container mt-4">
    <h3>تسک ها </h3>
    <br>

    <div class="row">
        <!-- Card for basic service details -->
        <div class="col-md-6">
            <div class="card mb-4">
                <div class="card-body">
                    <div class="card-text">
                        <p class="card-text"><strong>تعداد کل تسک های ثبت شده در سیستم:</strong> {{total_task}}</p>
                        <hr>
                        <p class="card-text"><strong>تسک های تکمیل شده:</strong> {{completed_task}}</p>
                        <hr>
                        <p class="card-text"><strong>تسک های  متوقف شده (Pending):</strong> {{pending_task}}</p>
                         <hr>
                        <p class="card-text"><strong>میانگین تعداد کار ها بر اساس کاربران:</strong> {{average_tasks_per_user}}</p>
                    </div>
                </div>
            </div>
            <h5 class="card-title">Task Distribution by Status</h5>
            <canvas id="taskStatusChart"></canvas>
        </div>
        <div class="col-md-6">
            <div class="card">
                <div class="card-body">
                    <h5 class="card-title">Task Distribution by Priority</h5>
                    <canvas id="taskPriorityChart"></canvas>
                </div>
            </div>
        </div>
</div>
</div>
<hr>
</div>
<script src="https://cdn.jsdelivr.net/npm/chart.js@3.7.0/dist/chart.min.js"></script>


<script>
    // Fetch data using AJAX
    fetch('{% url "charts:user_group_distribution_chart" %}')
        .then(response => response.json())
        .then(data => {
            // Data received, create pie chart
            var labels = data.labels;
            var data = data.data;

            // Create chart using Chart.js
            var ctx = document.getElementById('userGroupChart').getContext('2d');
            var chart = new Chart(ctx, {
                type: 'pie',
                data: {
                    labels: labels,
                    datasets: [{
                        data: data,
                        backgroundColor: [
                            'rgba(255, 99, 132, 0.7)',
                            'rgba(54, 162, 235, 0.7)',
                            'rgba(255, 206, 86, 0.7)',
                            'rgba(75, 192, 192, 0.7)',
                            'rgba(153, 102, 255, 0.7)',
                            'rgba(255, 159, 64, 0.7)',
                        ],
                        borderColor: [
                            'rgba(255, 99, 132, 1)',
                            'rgba(54, 162, 235, 1)',
                            'rgba(255, 206, 86,1)',
                            'rgba(75, 192, 192, 1)',
                            'rgba(153, 102, 255, 1)',
                            'rgba(255, 159, 64,1)',
                        ],
                        borderWidth: 1
                    }]
                },
                options: {
                    scales: {
                        y: {
                            display: false
                        }
                    }
                }
            });
        })
        .catch(error => console.error('Error fetching data:', error));
</script>
<script>
    // Fetch data using AJAX
    fetch('{% url "charts:appointment_service_chart" %}')
        .then(response => response.json())
        .then(data => {
            // Data received, create chart
            var labels = data.labels;
            var data = data.data;

            // Create chart using Chart.js
            var ctx = document.getElementById('appointmentTypesChart').getContext('2d');
            var chart = new Chart(ctx, {
                type: 'pie',
                data: {
                    labels: labels,
                    datasets: [{
                        label: 'Appointment Types',
                        data: data,
                        backgroundColor: [
                            'rgba(255, 99, 132, 0.7)',
                            'rgba(54, 162, 235, 0.7)',
                            'rgba(255, 206, 86, 0.7)',
                            'rgba(75, 192, 192, 0.7)',
                            'rgba(153, 102, 255, 0.7)',
                            'rgba(255, 159, 64, 0.7)'
                        ],
                        borderColor: [
                            'rgba(255, 99, 132, 1)',
                            'rgba(54, 162, 235, 1)',
                            'rgba(255, 206, 86, 1)',
                            'rgba(75, 192, 192, 1)',
                            'rgba(153, 102, 255,1)',
                            'rgba(255, 159, 64, 1)'
                        ],
                        borderWidth: 1
                    }]
                },
                options: {
                    // Add options here if needed
                }
            });
        })
        .catch(error => console.error('Error fetching data:', error));
</script>
<script>
    // Fetch data using AJAX
    fetch('{% url "charts:daily_appointments_chart" %}')
        .then(response => response.json())
        .then(data => {
            // Data received, create chart
            var labels = data.labels;
            var data = data.data;

            // Create chart using Chart.js
            var ctx = document.getElementById('dailyAppointmentsChart').getContext('2d');
            var chart = new Chart(ctx, {
                type: 'line',
                data: {
                    labels: labels,
                    datasets: [{
                        label: 'Daily Appointments',
                        data: data,
                        fill: false,
                        borderColor: 'rgba(75, 192, 192, 0.4)',
                        borderWidth: 2
                    }]
                },
                options: {
                    // Add options here if needed
                }
            });
        })
        .catch(error => console.error('Error fetching data:', error));
</script>

<script>
    // Fetch data using AJAX
    fetch('{% url "charts:client_gender_distribution" %}')
        .then(response => response.json())
        .then(data => {
            // Data received, create chart
            var labels = Object.keys(data);
            var counts = Object.values(data);

            // Create chart using Chart.js
            var ctx = document.getElementById('genderChart').getContext('2d');
            var chart = new Chart(ctx, {
                type: 'pie',
                data: {
                    labels: labels,
                    datasets: [{
                        label: 'توزیع جنسیت',
                        data: counts,
                        backgroundColor: ['rgba(255, 99, 132, 0.7)', 'rgba(54, 162, 235, 0.7)',], // Red for male, blue for female
                        borderWidth: 1
                    }]
                }
            });
        })
        .catch(error => console.error('Error fetching data:', error));
</script>
<script>
    // Fetch data using AJAX
    fetch('{% url "charts:client_vip_distribution" %}')
        .then(response => response.json())
        .then(data => {
            // Data received, create chart
            var labels = Object.keys(data);
            var counts = Object.values(data);

            // Create chart using Chart.js
            var ctx = document.getElementById('vipChart').getContext('2d');
            var chart = new Chart(ctx, {
                type: 'pie',
                data: {
                    labels: labels,
                    datasets: [{
                        label: 'توزیع مشتریان VIP',
                        data: counts,
                        backgroundColor: ['rgba(255, 99, 132, 0.7)', 'rgba(54, 162, 235, 0.7)',], // Red for VIP, blue for non-VIP
                        borderWidth: 1
                    }]
                }
            });
        })
        .catch(error => console.error('Error fetching data:', error));
</script>

<script>
    // Fetch data using AJAX
    fetch('{% url "charts:clients_by_insurance_chart" %}')
        .then(response => response.json())
        .then(data => {
            // Data received, create chart
            var labels = Object.keys(data);
            var counts = Object.values(data);

            // Create chart using Chart.js
            var ctx = document.getElementById('insuranceProviderChart').getContext('2d');
            var chart = new Chart(ctx, {
                type: 'bar',
                data: {
                    labels: labels,
                    datasets: [{
                        label: 'تعداد مشتریان',
                        data: counts,
                        backgroundColor: '#4BC0C0',
                        borderWidth: 1
                    }]
                },
                options: {
                    scales: {
                        y: {
                            beginAtZero: true
                        }
                    }
                }
            });
        })
        .catch(error => console.error('Error fetching data:', error));
</script>


<script>
    // Fetch data using AJAX
    fetch('{% url "charts:consumable_categories_distribution" %}')
        .then(response => response.json())
        .then(data => {
            // Data received, create chart
            var ctx = document.getElementById('consumableCategoriesChart').getContext('2d');
            var chart = new Chart(ctx, {
                type: 'pie',
                data: {
                    labels: data.labels,
                    datasets: [{
                        label: 'توزیع مصرفی‌ها',
                        data: data.counts,
                        backgroundColor: [
                            'rgba(255, 99, 132, 0.7)',
                            'rgba(54, 162, 235, 0.7)',
                            'rgba(255, 206, 86, 0.7)',
                            'rgba(75, 192, 192, 0.7)',
                            'rgba(153, 102, 255, 0.7)',
                            'rgba(255, 159, 64, 0.7)'
                        ],
                        borderColor: [
                            'rgba(255, 99, 132, 1)',
                            'rgba(54, 162, 235, 1)',
                            'rgba(255, 206, 86, 1)',
                            'rgba(75, 192, 192, 1)',
                            'rgba(153, 102, 255, 1)',
                            'rgba(255, 159, 64, 1)'
                        ],
                        borderWidth: 1
                    }]
                },
                options: {
                    responsive: true,
                    plugins: {
                        legend: {
                            position: 'top',
                        },
                        tooltip: {
                            callbacks: {
                                label: function(tooltipItem) {
                                    return `${tooltipItem.label}: ${tooltipItem.raw}`;
                                }
                            }
                        }
                    }
                }
            });
        })
        .catch(error => console.error('Error fetching data:', error));
</script>


<script>
    // Fetch data using AJAX
    fetch('{% url "charts:invoices_by_service" %}')
        .then(response => response.json())
        .then(data => {
            // Data received, create chart
            var ctx = document.getElementById('invoicesByServiceChart').getContext('2d');
            var chart = new Chart(ctx, {
                type: 'bar',
                data: {
                    labels: data.labels,
                    datasets: [{
                        label: 'تعداد فاکتورها',
                        data: data.counts,
                        backgroundColor: 'rgba(75, 192, 192, 0.2)',
                        borderColor: 'rgba(75, 192, 192, 1)',
                        borderWidth: 1
                    }]
                },
                options: {
                    scales: {
                        y: {
                            beginAtZero: true
                        }
                    }
                }
            });
        })
        .catch(error => console.error('Error fetching data:', error));
</script>


<script>
    // Fetch data using AJAX
    fetch('{% url "charts:invoices_by_payment_method" %}')
        .then(response => response.json())
        .then(data => {
            // Data received, create chart
            var ctx = document.getElementById('invoicesByPaymentMethodChart').getContext('2d');
            var chart = new Chart(ctx, {
                type: 'pie',
                data: {
                    labels: data.labels,
                    datasets: [{
                        label: 'توزیع روش‌های پرداخت',
                        data: data.counts,
                        backgroundColor: [
                            'rgba(255, 99, 132, 0.7)',
                            'rgba(54, 162, 235, 0.7)',
                            'rgba(255, 206, 86, 0.7)',
                            'rgba(75, 192, 192, 0.7)',
                            'rgba(153, 102, 255, 0.7)',
                            'rgba(255, 159, 64, 0.7)'
                        ],
                        borderColor: [
                            'rgba(255, 99, 132, 1)',
                            'rgba(54, 162, 235, 1)',
                            'rgba(255, 206, 86, 1)',
                            'rgba(75, 192, 192, 1)',
                            'rgba(153, 102, 255, 1)',
                            'rgba(255, 159, 64, 1)'
                        ],
                        borderWidth: 1
                    }]
                },
                options: {
                    responsive: true,
                    plugins: {
                        legend: {
                            position: 'top',
                        },
                        tooltip: {
                            callbacks: {
                                label: function(context) {
                                    var label = context.label || '';
                                    var value = context.raw || 0;
                                    return label + ': ' + value;
                                }
                            }
                        }
                    }
                }
            });
        })
        .catch(error => console.error('Error fetching data:', error));
</script>


<script>
    // Fetch data using AJAX
    fetch('{% url "charts:expenses_last_10_days" %}')
        .then(response => response.json())
        .then(data => {
            // Data received, create chart
            var ctx = document.getElementById('expensesLast10DaysChart').getContext('2d');
            var chart = new Chart(ctx, {
                type: 'line',
                data: {
                    labels: data.labels,
                    datasets: [{
                        label: 'تعداد هزینه‌ها',
                        data: data.data,
                        backgroundColor: 'rgba(54, 162, 235, 0.7)',
                        borderColor: 'rgba(54, 162, 235, 1)',
                        borderWidth: 1,
                        fill: false
                    }]
                },
                options: {
                    responsive: true,
                    scales: {
                        x: {
                            title: {
                                display: true,
                                text: 'تاریخ'
                            }
                        },
                        y: {
                            title: {
                                display: true,
                                text: 'تعداد هزینه‌ها'
                            },
                            beginAtZero: true
                        }
                    }
                }
            });
        })
        .catch(error => console.error('Error fetching data:', error));
</script>



<script>
    // Fetch data using AJAX
    fetch('{% url "charts:invoices_last_10_days" %}')
        .then(response => response.json())
        .then(data => {
            // Data received, create chart
            var ctx = document.getElementById('invoicesLast10DaysChart').getContext('2d');
            var chart = new Chart(ctx, {
                type: 'line',
                data: {
                    labels: data.labels,
                    datasets: [{
                        label: 'تعداد فاکتورها',
                        data: data.data,
                        backgroundColor: 'rgba(75, 192, 192, 0.7)',
                        borderColor: 'rgba(75, 192, 192, 1)',
                        borderWidth: 1,
                        fill: false
                    }]
                },
                options: {
                    responsive: true,
                    scales: {
                        x: {
                            title: {
                                display: true,
                                text: 'تاریخ'
                            }
                        },
                        y: {
                            title: {
                                display: true,
                                text: 'تعداد فاکتورها'
                            },
                            beginAtZero: true
                        }
                    }
                }
            });
        })
        .catch(error => console.error('Error fetching data:', error));
</script>


<script>
    // Fetch data using AJAX
    fetch('{% url "charts:clients_last_10_days" %}')
        .then(response => response.json())
        .then(data => {
            // Data received, create chart
            var ctx = document.getElementById('clientsLast10DaysChart').getContext('2d');
            var chart = new Chart(ctx, {
                type: 'line',
                data: {
                    labels: data.labels,
                    datasets: [{
                        label: 'تعداد مشتریان',
                        data: data.data,
                        backgroundColor: 'rgba(75, 192, 192, 0.7)',
                        borderColor: 'rgba(192, 75, 130, 1)',
                        borderWidth: 1,
                        fill: false
                    }]
                },
                options: {
                    responsive: true,
                    scales: {
                        x: {
                            title: {
                                display: true,
                                text: 'تاریخ'
                            }
                        },
                        y: {
                            title: {
                                display: true,
                                text: 'تعداد مشتریان'
                            },
                            beginAtZero: true
                        }
                    }
                }
            });
        })
        .catch(error => console.error('Error fetching data:', error));
</script>



<script>
    // Fetch data using AJAX
    fetch('{% url "charts:receptions_by_service" %}')
        .then(response => response.json())
        .then(data => {
            // Data received, create chart
            var ctx = document.getElementById('receptionsByServiceChart').getContext('2d');
            var chart = new Chart(ctx, {
                type: 'pie',
                data: {
                    labels: data.labels,
                    datasets: [{
                        label: 'تعداد پذیرش‌ها',
                        data: data.data,
                        backgroundColor: [
                            'rgba(255, 99, 132, 0.7)',
                            'rgba(54, 162, 235, 0.7)',
                            'rgba(255, 206, 86, 0.7)',
                            'rgba(75, 192, 192, 0.7)',
                            'rgba(153, 102, 255, 0.7)',
                            'rgba(255, 159, 64, 0.7)'
                        ],
                        borderColor: [
                            'rgba(255, 99, 132, 1)',
                            'rgba(54, 162, 235, 1)',
                            'rgba(255, 206, 86, 1)',
                            'rgba(75, 192, 192, 1)',
                            'rgba(153, 102, 255, 1)',
                            'rgba(255, 159, 64, 1)'
                        ],
                        borderWidth: 1
                    }]
                },
                options: {
                    responsive: true,
                }
            });
        })
        .catch(error => console.error('Error fetching data:', error));
</script>

<script>
    fetch('{% url "charts:receptions_last_10_days_chart" %}')
        .then(response => response.json())
        .then(data => {
            var dates = data.receptions_data.map(item => item.date);
            var counts = data.receptions_data.map(item => item.count);

            var ctx = document.getElementById('receptionsChart').getContext('2d');
            var chart = new Chart(ctx, {
                type: 'line',
                data: {
                    labels: dates,
                    datasets: [{
                        label: 'Number of Receptions',
                        data: counts,
                        backgroundColor: 'rgba(255, 99, 132, 0.7)',
                        borderColor: 'rgba(255, 99, 132, 1)',
                        borderWidth: 1
                    }]
                },
                options: {
                    scales: {
                        y: {
                            beginAtZero: true
                        }
                    }
                }
            });
        })
        .catch(error => console.error('Error fetching data:', error));
</script>


<script>
    fetch('{% url "charts:client_reception_chart" %}')
        .then(response => response.json())
        .then(data => {
            var labels = data.labels;
            var counts = data.data;

            var ctx = document.getElementById('clientReceptionChart').getContext('2d');
            var chart = new Chart(ctx, {
                type: 'bar',
                data: {
                    labels: labels,
                    datasets: [{
                        label: 'Number of Clients',
                        data: counts,
                        backgroundColor: [
                            'rgba(255, 99, 132, 0.7)',
                            'rgba(54, 162, 235, 0.7)'
                        ],
                        borderColor: [
                            'rgba(255, 99, 132, 1)',
                            'rgba(54, 162, 235, 1)'
                        ],
                        borderWidth: 1
                    }]
                },
                options: {
                    scales: {
                        y: {
                            beginAtZero: true
                        }
                    }
                }
            });
        })
        .catch(error => console.error('Error fetching data:', error));
</script>


<script>
    fetch('{% url "charts:service_reception_chart" %}')
        .then(response => response.json())
        .then(data => {
            var labels = data.labels;
            var counts = data.data;

            var ctx = document.getElementById('serviceReceptionChart').getContext('2d');
            var chart = new Chart(ctx, {
                type: 'bar',
                data: {
                    labels: labels,
                    datasets: [{
                        label: 'Number of Receptions',
                        data: counts,
                        backgroundColor: 'rgba(255, 99, 132, 0.7)',
                        borderColor: 'rgba(255, 99, 132, 1)',
                        borderWidth: 1
                    }]
                },
                options: {
                    scales: {
                        y: {
                            beginAtZero: true
                        }
                    }
                }
            });
        })
        .catch(error => console.error('Error fetching data:', error));
</script>



<script>
    fetch('{% url "charts:task_priority_chart" %}')
        .then(response => response.json())
        .then(data => {
            var labels = data.labels;
            var counts = data.data;

            var ctx = document.getElementById('taskPriorityChart').getContext('2d');
            var chart = new Chart(ctx, {
                type: 'pie',
                data: {
                    labels: labels,
                    datasets: [{
                        data: counts,
                        backgroundColor: [
                            'rgba(255, 99, 132, 0.7)',
                            'rgba(54, 162, 235, 0.7)',
                            'rgba(255, 206, 86, 0.7)',
                        ],
                        borderColor: [
                            'rgba(255, 99, 132, 1)',
                            'rgba(54, 162, 235, 1)',
                            'rgba(255, 206, 86, 1)',
                        ],
                        borderWidth: 1
                    }]
                },
                options: {
                    scales: {
                        y: {
                            beginAtZero: true
                        }
                    }
                }
            });
        })
        .catch(error => console.error('Error fetching data:', error));
</script>



<script>
    fetch('{% url "charts:task_status_chart" %}')
        .then(response => response.json())
        .then(data => {
            var labels = data.labels;
            var counts = data.data;

            var ctx = document.getElementById('taskStatusChart').getContext('2d');
            var chart = new Chart(ctx, {
                type: 'pie',
                data: {
                    labels: labels,
                    datasets: [{
                        data: counts,
                        backgroundColor: [
                            'rgba(255, 99, 132, 0.7)',
                            'rgba(54, 162, 235, 0.7)',
                            'rgba(255, 206, 86, 0.7)',
                            'rgba(75, 192, 192, 0.7)',
                        ],
                        borderColor: [
                            'rgba(255, 99, 132, 1)',
                            'rgba(54, 162, 235, 1)',
                            'rgba(255, 206, 86, 1)',
                            'rgba(75, 192, 192, 1)',
                        ],
                        borderWidth: 1
                    }]
                },
                options: {
                    scales: {
                        y: {
                            beginAtZero: true
                        }
                    }
                }
            });
        })
        .catch(error => console.error('Error fetching data:', error));
</script>
{%endblock%}